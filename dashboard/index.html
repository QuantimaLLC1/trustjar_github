<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<meta name="description" content="">
	<meta name="author" content="">
	<title>Welcome to trustjar</title>
	<!-- Bootstrap core CSS -->
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<!-- Custom styles for this template -->
	<link href="css/dashboard.css" rel="stylesheet">
</head>

<body>
 	<div id="disableControls" class="overlay hidden"></div>
	<div id="technicalDifficulties" class="techDifficulties hidden">We appear to be having trouble reaching you. If you're on a mobile device, check that your data service is working properly. If the problem continues, please close your browser and try again. </div>
<!-- 	<div id="landingWrapper"></div> -->
	<div id="splashDiv">
(SPLASH)

	<!-- 	<div id="splashLogotype" class="splash" onClick="animateLogotype()">
			<span id="t">t</span><span id="r">r</span><span id="u">u</span><span id="s">s</span><span id="t2">t</span><span id="j">j</span><span id="a">a</span><span id="r2">r</span></div>
	 -->
	</div>

<!-- *********************************** END HEADER **************************************** -->
<!-- *********************************** DASHBOARD SECTION **************************************** -->

<div id="dashboard" class="pageTemplate">

<!-- *********************************** JUMBOTRON SECTION **************************************** -->

<!-- Main jumbotron header. Includes profile section. -->
<div class="jumbotron" style="background-color:#125561">
	<div class="container" style="color:#cccccc">
		<div class="row">
			<div class="col-md-12">
				<!-- User's name is populated below -->
				<h1><span id="headerProfileName"></span>'s trustjar</h1>      
				<a href="#" data-toggle="modal" data-target="#signOutOverlay">
					<div id="signOut"class="pull-right">Sign out</div>
				</a>
				<!-- User's contact info. Populated by Firebase. -->
				<div style="height:1px; width:100%; background-color:#cccccc; margin-bottom:5px"></div>
				<div id="profileContactsContainer">
					<div id="profileContacts">
					</div>
					<div style="color:#cccccc"><a href="#" id="editProfileLink">Edit profile</a>
					</div>
				</div>
				<!-- 'Edit profile' form. Hidden by default. -->         
				<div id="editProfileForm" class="container col-md-8 row" style="color:#333333; background-color:#eeeeee; border: 1px solid #cccccc; display:none">
					<form name="profileForm" action="" onsubmit="return profileFormSubmit()" data-ajax="false">
						<div id="editProfileContacts" class="col-md-6">
							<label for="newProfileContact" style="margin-top:8px">Add a contact</label> 
							<input type="text" class="form-control" id="newProfileContact" placeholder="phone or email">
							<div style="font-weight: bold; margin-top:5px">
								Current contacts
								<a href="#" data-toggle="tooltip" data-placement="right" title="Contacts can only be removed when they're not in a relationship." onClick="return false"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span></a>
							</div>
							<!-- Profile contact list. Populated by Firebase, complete with checkboxes and 'unverified' links. -->
							<div id="editProfileContactList">
							</div>
						</div>
						<div class="col-md-6">
							<label for="editProfileFormName" style="margin-top:5px">Name</label> 
							<!-- User's name. Prepopulated via Firebase with the user's current name. -->
							<input type="text" class="form-control" id="editProfileFormName" placeholder="Add your name" required>
							<!-- User's passcode. Required. Blank by default. -->
							<label for="dashboardPasscode" style="margin-top:5px">Passcode (required)</label>
							<input type="password" class="form-control" id="dashboardPasscode" required>
							<div style="text-align:center; vertical-align:bottom; margin-top:15px; margin-bottom:10px">
								<!-- 'Save' opens a confirmation dialog. -->
								<button type="submit" id="profileFormSubmitBtn" class="btn btn-primary btn-md">
								Save
								</button>
								<!-- 'Cancel' closes the Profile form and returns the user to the default contact display. -->
								<button id="cancelEditProfileBtn" type="button" class="btn btn-primary btn-md">
								Cancel
								</button>
								<span style="padding-left:30px"></span>
								<!-- Opens a confirmation dialog. -->
								<button id="closeAccountBtn" type="button" class="btn btn-danger btn-md" data-toggle="modal" data-target="#closeAccount">
								Close account
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- Modal dialog to confirm that the user wants to close the accuount. User will still have to verify by responding to an email / SMS. -->
<div  id="closeAccount" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal">&times;</button>
				<h4 class="modal-title">Close your Trustjar account</h4>
			</div>
			<div class="modal-body">
				<p>If you confirm, a notification will be sent to all your contacts. Respond to any one of them to cancel your account. Notifications will also be sent to your relationship partners. Are you sure you want to continue?</p>
			</div>
			<div class="modal-footer">
				<!-- Confirmation sends a 'close account' message to Firebase -->
				<button id="confirmCloseAccount" type="button" class="btn btn-danger" data-dismiss="modal">Yes, close my account</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
			</div>
		</div>
	</div>
</div>

<!-- *********************************** END JUMBOTRON SECTION **************************************** -->
<div class="container"><!-- Bootstrap container to manage page width across different sizes. All subsequent HTML is within the container. -->
<!-- *********************************** SERVER ALERT SECTION **************************************** -->
<!-- Server alert component. Error messages and other system response messages go here. -->      
			<div id="serverAlertContainer" class="serverAlert well">
			</div>

<!-- *********************************** END SERVER ALERT SECTION **************************************** -->
<!-- *********************************** RELATIONSHIP SECTION **************************************** -->

	<h2 id="relationshipTypeHeader"></h2>
	<div class="row">
		<div id="relationshipColumn" class="col-md-9">  

		</div>

			<!-- Modal dialog for resending a notification to a user contact that's unverified -->
			<div id="resendVerification" class="modal" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Verify contact</h4>
						</div>
						<div class="modal-body">
							<p>You must verify this contact before it can be added to a relationship. Verify by responding to the notification you received at the specified email address or phone number when you added it to your trustjar.</p>
							<p>If you never received such a notification, make sure the email address or phone number you entered is correct. If it's incorrect, remove it from your profile and add the correct email or phone number. If you lost or deleted the notification, you can resend it again now.</p>
						</div>
						<div class="modal-footer">
							<button id="resendVerificationBtn" type="button" class="btn btn-default resendVerification" data-dismiss="modal">Resend</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal dialog for resending a notification to a counterparty contact that's unconfirmed -->
			<div id="counterpartyResend" class="modal" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Your partner hasn't confirmed the relationship</h4>
						</div>
						<div class="modal-body">
							<p>This contact has not responded to your request. If you think they responded, make sure the email or phone number for this contact was entered correctly. If not, remove it from the relationship and add (or have your partner add) the correct email or phone number.</p> 
							
							<p>If your partner lost the text or email containing the request, you can resend it.</p>
						</div>
						<div class="modal-footer">
							<button id="counterpartyResendBtn" type="button" class="btn btn-default counterpartyResend" data-dismiss="modal">Resend</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal dialog for confirming changes to a relationship via the 'Edit contacts' function -->
			<div id="confirmeditRelationshipContacts" class="modal" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Confirm relationship changes</h4>
						</div>
						<div class="modal-body">
							<p>Remember, your partner will be notified at each contact point that's affected by the change. Are you sure?</p>
						</div>
						<div class="modal-footer">
							<button id="confirmChangeBtn" type="button" class="btn btn-default confirmRelationshipChange" data-dismiss="modal">Change my profile</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						</div>
					</div>
				</div>
			</div>

			<!-- Modal confirmation dialog to convert a relationship to exclusive -->
			<div id="dashboardBecomeExclusive" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Make this an exclusive relationship</h4>
						</div>
						<div class="modal-body"> 
							<p>An exclusive relationship in Trustjar has different rules than a casual one. </p>
						
							<p>When you and your partner agree to an exclusive relationship, all contacts in your profile are locked out of participating in any other relationsihp, whether you include them in the relationship or not. So if this is the person you want all to yourself, you have to remove all other relationships from your Trustjar.* </p>

							<p>Once this is the only relationship in your dashboard, you can start the upgrade process. </p>

							<p style="color:#cc0000">*Remember, when you end a relationship of any kind, your partner's permission is not required but they will be notified across every contact in the relationship.</p> 

							<p>Your partner will receive notifications across all contacts in the relationship and will have to accept each one to complete the upgrade. </p>

							<p>Do you want to continue? </p>
						</div>
						<div class="modal-footer">
							<button id="confirmBecomeExclusiveBtn" type="button" class="btn btn-default confirmBecomeExclusive" data-dismiss="modal">Become exclusive</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						</div>
					</div>
				</div>
			</div>
		

			<!-- Modal confirmation dialog to remove a relationship -->
			<div id="dashboardRemoveRelationship" class="modal fade" role="dialog">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal">&times;</button>
							<h4 class="modal-title">Close this relationship</h4>
						</div>
						<div class="modal-body"> 
							<p>You're about to remove this relationship from your trustjar.</p>
						
							<p>When you confirm, the relationship will be closed and notifications will be sent to your partner at all their points of contact.</p>

							<p style="color:#cc0000">*Remember, when you end a relationship of any kind, your partner's permission is not required but they will be notified across every contact in the relationship.</p> 

							<p>If you want to restore the relationship, you will have to use the "Add a new relationship" form and start over.</p>

							<p>Do you want to continue? </p>
						</div>
						<div class="modal-footer">
							<button id="confirmRemoveRelationshipBtn" type="button" class="btn btn-default confirmRemoveRelationship" data-dismiss="modal">Close this relationship</button>
							<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						</div>
					</div>
				</div>
			</div>
		
		<div class="col-md-3">
			<!-- 'Add a new relationship' form -->
			<div class="well" id="newRelationshipContainer">
				<div style="float:left">
					<h5 style="margin:0px; font-weight:bold; color:#555555">
					Add a new relationship
					</h5>
				</div>
				<a href="#" data-toggle="tooltip" data-placement="top" title="We'll send instructions to your partner to complete the process. If you already have a relationship with this person in your Trustjar, select 'Manage contacts' in the relationship." onClick="return false" style="float:right">
					<span class="glyphicon glyphicon-info-sign pull-right" aria-hidden="true"></span>
				</a>
				<br>
				<div style="border-top: 1px solid #999999; margin-top:5px; margin-bottom:5px"></div>
				<span class="sr-only">Info:</span>
				<div>
					<form name="newRelationshipForm" action="" onsubmit="return newRelationshipFormSubmit()" data-ajax="false">
						<div class="form-group" style="margin:0px">
							<label for="exampleInputEmail1">You:</label>
							<!-- This is populated via Firebase listeners -->
							<div id="newRelationshipFormContacts" style="text-align:left">   
							</div>
							<div class="bs-example" data-example-id="buttons-radio">
								<label for="newRelationshipType">Relationship type (required)</label><br>
								<div class="btn-group" data-toggle="buttons">
				  					<label>
										<input id="newRelationshipRadioCasual" type="radio" name="newRelationshipType" value="casual" autocomplete="off" required> Casual
				  					</label><br>

										<label>
											<input id="newRelationshipRadioExclusive" type="radio" name="newRelationshipType" value="exclusive" autocomplete="off" required> Exclusive
										</label>
									</a>
								</div>
							</div>
							<div style="height:10px"></div>
							<div class="form-group" style="margin:0px">
								<label for="newRelationshipCounterpartyContact">Partner's phone or email</label>
								  <input type="text" class="form-control" id="newRelationshipCounterpartyContact" placeholder="Partner's phone or email" required>
							</div>
							<div><br>
								<button type="submit" id="newRelationshipFormSubmitBtn" class="btn btn-primary">Submit</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
	</div>

<!-- *********************************** END RELATIONSHIP SECTION **************************************** -->

</div> <!-- /container -->


<!-- ********************************************* FOOTER ************************************************** -->

	<footer class="footer globalFooter">
		<div class='container'>
			<div class='navbar-header'>
			<a href='#' id='helpLink'>Help</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
			<a href='#' id='privacyLink'>Privacy</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
			<a href='#' id='termsLink'>Terms</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
			<a href='#' id='contactLink'>Contact</a>
				<p>© Quantima 2015. All rights reserved.</p>
			</div>
		</div><!-- /container -->
	</footer>
<!-- ********************************************* END FOOTER ************************************************** -->
<!-- *************************************** FOOTER LINK OVERLAY ************************************************** -->

<!-- When a link is clicked, the overlay is dynamically populated with relevant header and body content and displayed when
the corresponding link is selected. -->
<div class='modal fade' id='footerOverlay' role='dialog'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header' id='modalHeader'>
				<button type='button' class='close' data-dismiss='modal'>&times;</button>
				<h4 class='modal-title'></h4>
			</div>
			<div class='modal-body' id='modalBody'>
			</div>
			<div class='modal-footer'>
				<button id='modalClose' type='button' class='btn btn-default' data-dismiss='modal'>Close</button>
			</div>
		</div>
	</div>
</div>
<!-- *************************************** END FOOTER LINK OVERLAY ************************************************** -->
<!-- *************************************** 'SIGN OUT' OVERLAY ************************************************** -->

<!-- Modal confirmation dialog when a user cilcks 'sign out' -->
<div class='modal fade' id='signOutOverlay' role='dialog'>
	<div class='modal-dialog'>
		<div class='modal-content'>
			<div class='modal-header' id='modalHeader'>
				<button type='button' class='close' data-dismiss='modal'>&times;</button>
				<h4 class='modal-title'>Are you sure?</h4>
			</div>
			<div class='modal-body' id='modalBody'>
				Please confirm that you want to sign out of Trustjar.
			</div>
			<div class='modal-footer'>
				<button id='confirmSignOut' type='button' class='btn btn-default' data-dismiss='modal'>Yes, I'm sure</button>
				<button id='modalClose' type='button' class='btn btn-default' data-dismiss='modal'>No, go back</button>
			</div>
		</div>
	</div>
</div>

<!-- ********************************* END 'SIGN OUT' OVERLAY ******************************************** -->
<!-- This closes the 'container' div near the top of this code. -->
</div>

<!-- ********************************* END DASHBOARD LAYOUT ******************************************** -->


<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster
<script src="../js/jquery.min.js"></script> -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script>
	if (!window.jQuery) {
		document.write("<script src='../js/jquery-2.1.4.min.js'><\/script>");
	}
	</script>
	<script src="https://cdn.firebase.com/js/client/2.4.2/firebase.js"></script>
	<script src="../js/bootstrap.min.js"></script>
	<script src="js/dashboard.js"></script><!-- All the code specifically written for this application -->
	<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
	<script src="../js/ie10-viewport-bug-workaround.js"></script>
	<script type="text/javascript" src="../js/unitTests.js"></script> <!-- Code containing the unit test --> 
<!--
	<script  language="javascript">
		window.onload = animateLogotype()
	</script>
-->

</body>
</html>